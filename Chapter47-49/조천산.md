# 47장 에러 처리

## 에러 처리를 하는 이유

- 코드 진행 상황에서 에러가 나더라고 전체 프로그램이 강제 종료 되는 상황을 방지하기 위해서 이다
- 직접적으로 에러를 발생하지는 않는 예외적인 상황이 발생할 수도 있기 떄문에 예외적인 상황에 명시적으로 에러처리를 하지 않으면
  어느 곳에서 잘못되었는지 알기 힘들다

## try …catch …finally

```jsx
try {
  //실행할 코드
  //에러가 날 가능성이 있는 코드
} catch (err) {
  // 에러가 날 경우 호출할 코드
  // error객체가 전달됌
} finally {
  // 에러 여부와 상관없이 한번 실행할 코드
}
```

## throw 문

- Error 생성자 함수로 에러 객체를 생성한다고 에러가 발생하는 것은 아님 에러객체 생성과 에러 발생은 다르다

```jsx
try {
  //에러 객체를 던지면 catch 코드 블록이 실행
  throw new Error("error!!"); // 이 문이 실행되서 catch에 전달
} catch (err) {
  console.log(err);
}
```

# 48장 모듈

- 모듈
  - 애플리케이션을 구성하는 개별적 요소 재사용 가능한 코드 조각
  - 일반적으로 기능 단위로 분리
  - 모듈은 공개가 필요한 자산에 한정하여 명시적으로 선택적 공개가 가능 ⇒ export

## 자바스크립트와 모듈

- 기본적으로 자바스크립트 내에서 모듈을 지원하지 않음
- 자바스크립트 파일을 여러 개의 파일로 분리하여 script 태그로 분리해도 분리된 자바스크립트 파일들은 하나의 자바스크립트 파일 내에 있는 것처럼 동작
- 자바스크립트를 범용적으로 사용하기위해 모듈화를 해결해야 했고 이에 대해 제안된 것 ⇒ commonJS, AMD

## ES6 모듈(ESM)

- ES6 모듈 = ESM
  ```html
  <script type="module" src="app.mjs"></script>
  ```
- 모듈 스코프
  - 독자적인 모듈 스코프를 가진다
- export
- import

# 49장 Babel과 Webpack을 이용한 ES6+/ES.NEXT 개발 환경 구축

- ES6+ 또는 ES NEXT의 ES 최신 사양을 사용하여 프로젝트를 진행하려면 최신 사양으로 작성된 코드를 경우에 따라 IE를 포함한 구형 브라우저에서 문제 없이 동작시키기 위한 개발 환경을 구축하는 것이 필요
  특히 모듈의 경우, 모듈 로더가 필요
- Babel
  - 트랜스파일러
  - 최신 버전 예전 버전에도 최적화
- Webpack
  - 의존 관계에 있는 모듈들을 하나의 자바스크립트 파일로 번들링하는 모듈 번들러
    - 대부분의 프로젝트가 모듈을 사용하기 때문

## Babel

### **트랜스파일링**

```jsx
{
  "name": "es6-project",
  "version": "1.0.0",
  "scripts": {
    "build": "babel src/js -w -d dist/js"
  },
  "devDependencies": {
    "@babel/cli": "^7.7.0",
    "@babel/core": "^7.7.2",
    "@babel/preset-env": "^7.7.1"
  }
}
```

위 npm script는 src/js 폴더(타깃 폴더)에 있는 모든 ES6+ 파일들을 트랜스파일링한 후, 그 결과물을 dist/js 폴더에 저장

- **w**
  타깃 폴더에 있는 모든 파일들의 변경을 감지하여 자동으로 트랜스파일한다. (--watch 옵션의 축약형)
- **d**
  트랜스파일링된 결과물이 저장될 폴더를 지정한다. (--out-dir 옵션의 축약형)

## Webpack

- 의존 관계에 있는 모듈들을 하나의 자바스크립트 파일로 번들링하는 모듈 번들러이다
- Webpack을 사용하면 의존 모듈이 하나의 파일로 번들링되므로 별도의 모듈 로더가 필요없다. 그리고 다수의 자바스크립트 파일을 하나의 파일로 번들링하므로 html 파일에서 script 태그로 다수의 자바스크립트 파일을 로드해야 하는 번거로움도 사라진다.

### babel-loader

- Webpack이 모듈을 번들링할 때 Babel을 사용하여 ES6+ 코드를 ES5 코드로 트랜스파일링하도록 babel-loader를 설치한다.

### babel-polyfill

- Babel을 사용하여 ES6+ 코드를 ES5 이하로 트랜스파일링하여도 브라우저가 지원하지 않는 코드가 남아 있을 수 있다. 예를 들어, ES6에서 추가된 Promise, Object.assign, Array.from 등은 ES5 이하로 트랜스파일링하여도 대체할 ES5 기능이 없기 때문에 그대로 남아 있다.
- 래된 브라우저에서도 ES6+에서 새롭게 추가된 객체나 메소드를 사용하기 위해서는 @babel/polyfill을 설치해야 한다.
